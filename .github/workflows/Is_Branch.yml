# see https://stackoverflow.com/a/77727776
on:
  workflow_call:
    inputs:
      branch:
        required: true
        type: string
    outputs:
      is_branch:
        value: ${{ jobs.Get-Branch-Check.outputs.is_branch }}
      branches:
        value: ${{ jobs.Get-Branch-Check.outputs.branches }}
jobs:
  Get-Branch-Check:
    runs-on: ubuntu-latest
    outputs:
      branches: ${{ steps.get-branch.outputs.branches }}
      is_branch: contains(${{ steps.get-branch.outputs.branches }}, ${{ inputs.branch }})
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Get Branch
        id: get-branch
        run: |
          raw=$(git branch -r --contains ${{ github.ref }})
          branch="$(echo ${raw//origin\//} | tr -d '\n')"
          echo "{name}=branches" >> $GITHUB_OUTPUT
          echo "Branches: $branches"
    
    
